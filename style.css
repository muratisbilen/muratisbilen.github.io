body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background-color: #f7f7f7;
    color: #333;
}

#login-container, #game-container {
    text-align: center;
}

.hidden {
    display: none;
}

.header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    max-width: 500px;
    margin: 0 auto 20px auto;
}

.header h1 {
    margin: 0;
}

#leaderboard-btn {
    padding: 8px 16px;
    font-size: 1rem;
    border: none;
    background-color: #6aaa64;
    color: white;
    border-radius: 5px;
    cursor: pointer;
}

#game-board {
    display: grid;
    grid-template-rows: repeat(6, 1fr);
    gap: 5px;
    margin-bottom: 20px;
}

.letter-row {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 5px;
}

.letter-box {
    width: 60px;
    height: 60px;
    border: 2px solid #ccc;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 2.5rem;
    font-weight: bold;
    text-transform: uppercase;
    color: #333;
}

.green { background-color: #6aaa64; color: white; border-color: #6aaa64; }
.yellow { background-color: #c9b458; color: white; border-color: #c9b458; }
.gray { background-color: #787c7e; color: white; border-color: #787c7e; }

#keyboard-cont {
    margin-top: 20px;
}

.keyboard-row {
    display: flex;
    justify-content: center;
    margin-bottom: 8px;
}

.key-button {
    padding: 0;
    height: 58px;
    flex-grow: 1;
    margin: 0 3px;
    border-radius: 4px;
    border: none;
    background-color: #d3d6da;
    font-size: 1rem;
    font-weight: bold;
    cursor: pointer;
    text-transform: uppercase;
}
.key-button[data-key="enter"], .key-button[data-key="del"] {
    flex-grow: 1.5;
}

/* Modal Styles */
.modal {
    position: fixed;
    z-index: 100;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.6);
    display: flex;
    justify-content: center;
    align-items: center;
}

.modal-content {
    background-color: #fefefe;
    padding: 20px;
    border: 1px solid #888;
    width: 90%;
    max-width: 500px;
    border-radius: 10px;
    position: relative;
    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
}

.close-btn {
    color: #aaa;
    position: absolute;
    top: 10px;
    right: 20px;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
}
.close-btn:hover { color: black; }

/* Tab Styles */
.tab-buttons {
    overflow: hidden;
    border-bottom: 1px solid #ccc;
    margin-bottom: 15px;
}
.tab-buttons .tab-link {
    background-color: inherit;
    float: left;
    border: none;
    outline: none;
    cursor: pointer;
    padding: 14px 16px;
    transition: 0.3s;
    font-size: 17px;
}
.tab-buttons .tab-link:hover { background-color: #ddd; }
.tab-buttons .tab-link.active {
    border-bottom: 3px solid #6aaa64;
    font-weight: bold;
}

.tab-content {
    display: none;
}
.tab-content.active {
    display: block;
}

#daily-leaderboard-list, #monthly-leaderboard-sum-list, #monthly-leaderboard-mean-list {
    list-style-type: none;
    padding: 0;
}
#daily-leaderboard-list li, #monthly-leaderboard-sum-list li, #monthly-leaderboard-mean-list li {
    padding: 8px;
    border-bottom: 1px solid #eee;
}
#daily-leaderboard-list li:last-child, #monthly-leaderboard-sum-list li:last-child, #monthly-leaderboard-mean-list li:last-child {
    border-bottom: none;
}```

### 3. Updated `script.js` File

Finally, replace your entire `script.js` file with this new version. This script includes the logic for showing/hiding the modal, handling the tab switching, and populating the new leaderboard lists.

```javascript
document.addEventListener("DOMContentLoaded", () => {
    // --- ELEMENT SELECTORS ---
    const loginContainer = document.getElementById("login-container");
    const gameContainer = document.getElementById("game-container");
    const usernameInput = document.getElementById("username-input");
    const loginButton = document.getElementById("login-button");
    const gameBoard = document.getElementById("game-board");
    const keyboardContainer = document.getElementById("keyboard-cont");
    
    // Leaderboard Modal Elements
    const leaderboardModal = document.getElementById("leaderboard-modal");
    const openLeaderboardBtn = document.getElementById("leaderboard-btn");
    const closeLeaderboardBtn = document.querySelector(".close-btn");
    const tabLinks = document.querySelectorAll(".tab-link");
    const tabContents = document.querySelectorAll(".tab-content");

    // --- GAME STATE VARIABLES ---
    let username = "";
    let startTime;
    let dictionary = [];
    let solution = "";
    let keyStatus = {};
    let currentRow = 0;
    let currentCol = 0;
    let isGameOver = false;

    // --- INITIAL SETUP ---

    // Fetch word list from file
    async function loadWords() {
        try {
            const response = await fetch('words.txt');
            if (!response.ok) throw new Error('Network response was not ok');
            const text = await response.text();
            dictionary = text.split('\n').map(word => word.trim().toLocaleLowerCase('tr-TR')).filter(word => word.length === 5);
            if (dictionary.length === 0) {
                 console.error("Dictionary is empty!");
                 alert("Kelime listesi yüklenemedi.");
            }
        } catch (error) {
            console.error('Failed to load word list:', error);
            alert("Kelime listesi yüklenemedi. Oyun başlatılamıyor.");
        }
    }

    // --- EVENT LISTENERS ---

    // Login
    loginButton.addEventListener("click", () => {
        const enteredUsername = usernameInput.value.trim();
        if (enteredUsername) {
            username = enteredUsername;
            localStorage.setItem("wordle_username", username);
            checkIfPlayedToday();
        }
    });

    // Leaderboard Modal Listeners
    openLeaderboardBtn.addEventListener("click", () => leaderboardModal.classList.remove("hidden"));
    closeLeaderboardBtn.addEventListener("click", () => leaderboardModal.classList.add("hidden"));
    window.addEventListener("click", (event) => {
        if (event.target == leaderboardModal) {
            leaderboardModal.classList.add("hidden");
        }
    });

    // Tab switching listener
    tabLinks.forEach(tab => {
        tab.addEventListener("click", () => {
            const targetTab = document.getElementById(tab.dataset.tab + '-tab');

            tabLinks.forEach(t => t.classList.remove('active'));
            tabContents.forEach(tc => tc.classList.remove('active'));

            tab.classList.add('active');
            targetTab.classList.add('active');
        });
    });

    // --- CORE GAME LOGIC ---
    
    // Check if user has already played today
    async function checkIfPlayedToday() {
        const today = new Date().toISOString().split('T')[0];
        const lastPlayDate = localStorage.getItem(`wordle_last_play_${username}`);

        if (lastPlayDate === today) {
            alert("Bugün zaten oynadınız. Yarın tekrar gelin!");
        } else {
            loginContainer.classList.add("hidden");
            gameContainer.classList.remove("hidden");
            await startGame();
        }
    }

    // Main function to start a new game
    async function startGame() {
        isGameOver = false; // Reset game state
        await loadWords();
        if (dictionary.length > 0) {
           solution = dictionary[Math.floor(Math.random() * dictionary.length)];
           console.log(`Today's word (for testing): ${solution}`);
           startTime = new Date();
           displayLeaderboards(); // Fetch leaderboards at the start
        }
    }
    
    function handleKeyPress(key) {
        if (isGameOver || currentCol >= 5) return;
        gameBoard.children[currentRow].children[currentCol].textContent = key;
        currentCol++;
    }

    function handleEnter() {
        if (isGameOver || currentCol !== 5) return;
        const guess = getCurrentGuess();
        if (dictionary.includes(guess)) {
            checkGuess(guess);
            if (!isGameOver) {
                currentRow++;
                currentCol = 0;
            }
        } else {
            alert("Kelime sözlükte yok!");
        }
    }

    function handleDelete() {
        if (isGameOver || currentCol === 0) return;
        currentCol--;
        gameBoard.children[currentRow].children[currentCol].textContent = "";
    }
    
    function getCurrentGuess() {
        let guess = "";
        const row = gameBoard.children[currentRow];
        for (let i = 0; i < 5; i++) {
            guess += row.children[i].textContent;
        }
        return guess.toLocaleLowerCase('tr-TR');
    }

    // Check guess and update UI
    function checkGuess(guess) {
        const row = gameBoard.children[currentRow];
        const solutionLetters = solution.split('');
        const guessLetters = guess.split('');

        for (let i = 0; i < 5; i++) {
            if (guessLetters[i] === solutionLetters[i]) {
                row.children[i].classList.add("green");
                updateKeyStatus(guessLetters[i], "green");
                solutionLetters[i] = null;
                guessLetters[i] = null;
            }
        }

        for (let i = 0; i < 5; i++) {
            if (guessLetters[i] !== null) {
                const letterIndex = solutionLetters.indexOf(guessLetters[i]);
                if (letterIndex > -1) {
                    row.children[i].classList.add("yellow");
                    updateKeyStatus(guessLetters[i], "yellow");
                    solutionLetters[letterIndex] = null;
                } else {
                    row.children[i].classList.add("gray");
                    updateKeyStatus(guessLetters[i], "gray");
                }
            }
        }
        
        updateKeyboardDisplay();

        if (guess === solution || currentRow === 5) {
            isGameOver = true;
            const didWin = guess === solution;
            const score = didWin ? calculateScore() : 0;
            saveScore(score);
            setTimeout(() => {
                const message = didWin 
                    ? `Kazandınız! Puanınız: ${score.toFixed(5)}` 
                    : `Kaybettiniz! Doğru kelime: ${solution}`;
                alert(message);
            }, 100);
            localStorage.setItem(`wordle_last_play_${username}`, new Date().toISOString().split('T')[0]);
        }
    }

    function calculateScore() {
        const endTime = new Date();
        const timeTaken = (endTime - startTime) / 1000;
        return (1 / timeTaken) * (1 / Math.pow(currentRow + 1, 3));
    }

    // --- LEADERBOARD & DATA HANDLING ---
    
    function saveScore(score) {
        const today = new Date().toISOString().split('T')[0];
        const month = new Date().toISOString().slice(0, 7);
        db.collection("dailyScores").add({ username, score, date: today });

        const userMonthlyDocRef = db.collection("monthlyScores").doc(`${username}_${month}`);
        db.runTransaction((transaction) => {
            return transaction.get(userMonthlyDocRef).then((doc) => {
                if (!doc.exists) {
                    transaction.set(userMonthlyDocRef, { username, month, totalScore: score, playCount: 1 });
                } else {
                    const newTotalScore = doc.data().totalScore + score;
                    const newPlayCount = doc.data().playCount + 1;
                    transaction.update(userMonthlyDocRef, { totalScore: newTotalScore, playCount: newPlayCount });
                }
            });
        }).then(() => {
            // Update the leaderboards on screen as soon as the score is saved.
            displayLeaderboards();
        });
    }

    function displayLeaderboards() {
        // Daily
        const today = new Date().toISOString().split('T')[0];
        db.collection("dailyScores").where("date", "==", today).orderBy("score", "desc").limit(10).get().then(snap => {
            const list = document.getElementById("daily-leaderboard-list");
            list.innerHTML = "";
            snap.forEach(doc => {
                const li = document.createElement("li");
                li.textContent = `${doc.data().username}: ${doc.data().score.toFixed(5)}`;
                list.appendChild(li);
            });
        });

        // Monthly
        const month = new Date().toISOString().slice(0, 7);
        db.collection("monthlyScores").where("month", "==", month).get().then(snap => {
            let monthlyData = [];
            snap.forEach(doc => monthlyData.push(doc.data()));

            // Sum List
            const sumList = document.getElementById("monthly-leaderboard-sum-list");
            sumList.innerHTML = "";
            monthlyData.sort((a, b) => b.totalScore - a.totalScore).slice(0, 10).forEach(data => {
                const li = document.createElement("li");
                li.textContent = `${data.username}: ${data.totalScore.toFixed(5)}`;
                sumList.appendChild(li);
            });

            // Mean List
            const meanList = document.getElementById("monthly-leaderboard-mean-list");
            meanList.innerHTML = "";
            monthlyData.sort((a, b) => (b.totalScore / b.playCount) - (a.totalScore / a.playCount)).slice(0, 10).forEach(data => {
                const li = document.createElement("li");
                const avg = data.playCount > 0 ? (data.totalScore / data.playCount) : 0;
                li.textContent = `${data.username}: ${avg.toFixed(5)}`;
                meanList.appendChild(li);
            });
        });
    }

    // --- ON-SCREEN & PHYSICAL KEYBOARD ---

    // Generate on-screen keyboard
    const keyboardLayout = [
        ["e", "r", "t", "y", "u", "ı", "o", "p", "ğ", "ü"],
        ["a", "s", "d", "f", "g", "h", "j", "k", "l", "ş", "i"],
        ["enter", "z", "c", "v", "b", "n", "m", "ö", "ç", "del"]
    ];
    keyboardLayout.forEach(row => {
        const rowDiv = document.createElement("div");
        rowDiv.className = "keyboard-row";
        row.forEach(key => {
            const btn = document.createElement("button");
            btn.className = "key-button";
            btn.textContent = key;
            btn.dataset.key = key;
            btn.addEventListener("click", () => {
                if (key === "enter") handleEnter();
                else if (key === "del") handleDelete();
                else handleKeyPress(key);
            });
            rowDiv.appendChild(btn);
        });
        keyboardContainer.appendChild(rowDiv);
    });
    
    // Update keyboard colors
    function updateKeyStatus(letter, status) {
        const current = keyStatus[letter];
        if (current === 'green' || (current === 'yellow' && status !== 'green')) return;
        keyStatus[letter] = status;
    }
    function updateKeyboardDisplay() {
        for (const letter in keyStatus) {
            const keyBtn = keyboardContainer.querySelector(`[data-key='${letter}']`);
            if (keyBtn) {
                keyBtn.classList.remove('green', 'yellow', 'gray');
                keyBtn.classList.add(keyStatus[letter]);
            }
        }
    }
    
    // Physical keyboard listener
    document.addEventListener("keydown", (e) => {
        if (document.activeElement === usernameInput) return;
        const key = e.key.toLocaleLowerCase('tr-TR');
        if (key === "enter") handleEnter();
        else if (key === "backspace") handleDelete();
        else if (/^[a-zçğıöşü]$/.test(key)) handleKeyPress(key);
    });

    // --- INITIALIZE ---
    const storedUsername = localStorage.getItem("wordle_username");
    if (storedUsername) {
        usernameInput.value = storedUsername;
        username = storedUsername;
    }

    // Build the empty game board
    for (let i = 0; i < 6; i++) {
        let row = document.createElement("div");
        row.className = "letter-row";
        for (let j = 0; j < 5; j++) {
            row.appendChild(document.createElement("div"));
            row.children[j].className = "letter-box";
        }
        gameBoard.appendChild(row);
    }
});
